┌─────────────────────────────────────────────────────────────────────┐
│                 Sequence: end-to-end question flow                  │
└─────────────────────────────────────────────────────────────────────┘

User        Streamlit/API     QAService    Embedding    FAISS    Reranker    LLM
 │              │             │            │           │         │         │
 │ Question     │             │            │           │         │         │
 ├─────────────▶│             │            │           │         │         │
 │              │ ask()       │            │           │         │         │
 │              ├────────────▶│            │           │         │         │
 │              │             │ embed()    │           │         │         │
 │              │             ├───────────▶│           │         │         │
 │              │             │            │           │         │         │
 │              │             │◀───────────┤           │         │         │
 │              │             │ query vec  │           │         │         │
 │              │             │            │           │         │         │
 │              │             │ search()   │           │         │         │
 │              │             ├────────────┼──────────▶│         │         │
 │              │             │            │           │         │         │
 │              │             │◀───────────┼───────────┤         │         │
 │              │             │            │  top-20   │         │         │
 │              │             │            │           │         │         │
 │              │             │ rerank()   │           │         │         │
 │              │             ├────────────┼───────────┼────────▶│         │
 │              │             │            │           │         │         │
 │              │             │◀───────────┼───────────┼─────────┤         │
 │              │             │            │           │  top-3  │         │
 │              │             │            │           │         │         │
 │              │             │ format_prompt()        │         │         │
 │              │             ├────────────────────────┼─────────┼────────▶│
 │              │             │            │           │         │ generate│
 │              │             │            │           │         │         │
 │              │             │◀───────────┼───────────┼─────────┼─────────┤
 │              │             │            │           │         │ answer  │
 │              │             │            │           │         │         │
 │              │◀────────────┤            │           │         │         │
 │              │  result     │            │           │         │         │
 │◀─────────────┤             │            │           │         │         │
 │   Display    │             │            │           │         │         │
 │              │             │            │           │         │         │
